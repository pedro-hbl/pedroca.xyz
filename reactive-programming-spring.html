<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light" />
    <meta name="generator" content="Marmite Retro Edition" />

    <title>Reactive Programming(Paradigm) and how to work with it in Spring - Pedro Lopes</title>

    
<meta property="og:title" content="Reactive Programming(Paradigm) and how to work with it in Spring">
<meta property="og:description" content=" Introduction It is evident that modern applications are facing increasingly demanding requirements....">
<meta property="og:type" content="article">
<meta property="og:site_name" content="Pedro Lopes">


<meta property="article:author" content="Pedro Lopes">



    <!-- Retro Theme Styles -->
    <link rel="stylesheet" href="./static/css/retro-theme.css">
    <link rel="stylesheet" href="./static/css/windows95.css">
    <link rel="stylesheet" href="./static/css/curve-inspired.css">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="./static/favicon.ico">

    
</head>
<body>
    <!-- Desktop with Retro Background -->
    <div class="desktop-wrapper">
        <!-- Main Window Chrome -->
        <div class="window-chrome">
            <!-- Title Bar -->
            <div class="title-bar">
                <span class="title-text">
                    Pedro Lopes - Reactive Programming(Paradigm) and how to work with it in Spring
                </span>
                <div class="window-controls">
                    <button class="btn-minimize" aria-label="Minimize">_</button>
                    <button class="btn-maximize" aria-label="Maximize">â–¡</button>
                    <button class="btn-close" aria-label="Close">Ã—</button>
                </div>
            </div>

            <!-- Menu Bar / Navigation -->
            <nav class="menu-bar">
                <a href="https://pedroca.xyz">Home</a>
                
                <a href="tags.html">Tags</a>
                
                <a href="archive.html">Archive</a>
                
                <a href="authors.html">Authors</a>
                
            </nav>

            <!-- Main Content Area -->
            <main class="content-area">
                
<article class="window-panel">
    <!-- Post Header -->
    <header class="post-header">
        <h1 class="post-title">Reactive Programming(Paradigm) and how to work with it in Spring</h1>

        <div class="post-meta">
            

            
            <span class="post-author">
                ðŸ‘¤ by <a href="author-pedrohbl_.html">Pedro Lopes</a>
            </span>
            

            
            <div class="post-tags">
                
                
                <a href="tag-java.html" class="retro-badge">java</a>
                
                
                <a href="tag-kotlin.html" class="retro-badge">kotlin</a>
                
                
                <a href="tag-spring.html" class="retro-badge">spring</a>
                
                
                <a href="tag-reactive.html" class="retro-badge">reactive</a>
                
                
                <a href="tag-webflux.html" class="retro-badge">webflux</a>
                
                
                <a href="tag-project-reactor.html" class="retro-badge">project-reactor</a>
                
                
                <a href="tag-back-pressure.html" class="retro-badge">back-pressure</a>
                
                
                <a href="tag-concurrency.html" class="retro-badge">concurrency</a>
                
                
                <a href="tag-messaging.html" class="retro-badge">messaging</a>
                
                
                <a href="tag-kafka.html" class="retro-badge">kafka</a>
                
            </div>
            
        </div>
    </header>

    <!-- Post Content -->
    <div class="post-content">
        <p>Apr 29, 2025 - â§– 23 min</p>
<h2 id="introduction">Introduction</h2>
<p>It is evident that modern applications are facing increasingly demanding requirements. The systems we built just a few years ago, monolithic applications or even some simple CRUD microservices serving modest user bases are now becoming to struggle when needed to handle thousands of concurrent users, each expecting near-instantaneous responses. This shift has pushed some developers to rethink fundamental architectural patterns.</p>
<p>So, there's this book called "Designing Data-Intensive Applications" where Martin Kleppmann describes this evolution perfectly. Today's users expect millisecond responses whether they're the only person on your site or sharing it with thousands of others. It's a reality that forces us to build applications that are more scalable, elastic, robust, and resilient than ever before.</p>
<p>In this environment of high performance APIs, there's a paradigm called "Reactive Programming", which has emerged as a compelling solution to these challenges. What started as a niche paradigm has moved toward the mainstream, particularly for applications dealing with high concurrency or integration with asynchronous systems. If you've attended a Java/Kotlin technical interview recently, you've likely encountered questions about reactive programmingâ€”perhaps wondering if it's just another industry buzzword or genuinely the answer to modern performance requirements.</p>
<p>In this post I'll be focusing on reactive programming in Spring. Basically covering some topics below:</p>
<ol>
<li><strong>What is reactive programming</strong></li>
<li><strong>How Spring implements the reactive paradigm</strong></li>
<li><strong>Benefits you can expect</strong></li>
<li><strong>Limitations</strong></li>
<li><strong>Common anti-patterns</strong></li>
<li><strong>Inter-service communication in reactive systems</strong></li>
<li><strong>Best practices</strong></li>
</ol>
<h2 id="what-is-reactive-programming">What Is Reactive Programming?</h2>
<p>Reactive programming is a declarative programming paradigm concerned with data streams and the propagation of change. Instead of pulling data (as in imperative programming), reactive programming lets you set up data streams where changes propagate automatically. An example could be the difference between checking your email every 5 minutes (imperative) versus getting push notifications when new emails arrive (reactive).</p>
<p>There is a source of truth about the paradigm which is <a href="https://www.reactivemanifesto.org/">Reactive Manifesto</a>(you should probably check it out as well), which emerged from the need to build systems that are:</p>
<ul>
<li><strong>Responsive</strong>: They respond in a timely manner</li>
<li><strong>Resilient</strong>: They stay responsive in the face of failure</li>
<li><strong>Elastic</strong>: They stay responsive under varying workload</li>
<li><strong>Message-driven</strong>: They rely on asynchronous message-passing</li>
</ul>
<p>This isn't just theoretical as these principles directly address real-world challenges in modern distributed systems, as our applications scaled up to serve thousands of concurrent users, the limitations of thread-per-request models became really painful.</p>
<h3 id="the-shift-is-basically-threads-events">The shift is basically: Threads -&gt; Events</h3>
<p>Traditional Spring MVC applications typically use a thread-per-request model. If your application receives 200 concurrent requests, it needs approximately 200 threads to handle them. This is actually fine for modest concurrency and standard applications, but there are some points to take care when it comes to high concurrency levels and higher tps(lets say above 1000tps):</p>
<ol>
<li><strong>Threads are expensive</strong>: Each thread consumes memory (often ~1MB of stack space)</li>
<li><strong>Context switching is costly</strong>: The CPU spends time switching between threads</li>
<li><strong>Most threads spend their time waiting</strong>: Threads sit idle during I/O operations</li>
</ol>
<p>Consider this example of a traditional Spring MVC endpoint that calls an external service(this is probably how your API works):</p>
<div class="codehilite"><pre><span></span><code><span class="nv">@GetMapping</span><span class="p">(</span><span class="ss">&quot;/customers/{id}&quot;</span><span class="p">)</span>
<span class="k">public</span><span class="w"> </span><span class="n">Customer</span><span class="w"> </span><span class="n">getCustomer</span><span class="p">(</span><span class="nv">@PathVariable</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">thread</span><span class="w"> </span><span class="n">blocks</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">database</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">customerRepository</span><span class="p">.</span><span class="n">findById</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="w">           </span><span class="p">.</span><span class="n">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CustomerNotFoundException</span><span class="p">(</span><span class="n">id</span><span class="p">));</span>
<span class="err">}</span>
</code></pre></div>

<p>During the database call, this thread is blockedâ€”consuming resources but doing no useful work. Now multiply this by thousands of concurrent requests, and you can see why this model struggles at scale =D.</p>
<p>Reactive programming takes a different approach, using a small number of threads and an event loop model similar to Node.js:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">@GetMapping</span><span class="p">(</span><span class="ss">&quot;/customers/{id}&quot;</span><span class="p">)</span>
<span class="k">public</span><span class="w"> </span><span class="n">Mono</span><span class="o">&lt;</span><span class="n">Customer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">getCustomer</span><span class="p">(</span><span class="nv">@PathVariable</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">doesn</span><span class="err">&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="n">immediately</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ss">&quot;promise&quot;</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">customer</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">customerRepository</span><span class="p">.</span><span class="n">findById</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="w">           </span><span class="p">.</span><span class="n">switchIfEmpty</span><span class="p">(</span><span class="n">Mono</span><span class="p">.</span><span class="n">error</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">CustomerNotFoundException</span><span class="p">(</span><span class="n">id</span><span class="p">)));</span>
<span class="err">}</span>
</code></pre></div>

<p>In this reactive version, the thread handling the request isn't blocked during the database call. Instead, it processes other requests and is notified when the data is ready. This allows each thread to handle many more requests, significantly improving resource utilization.</p>
<h3 id="key-concepts-in-reactive-programming">Key Concepts in Reactive Programming</h3>
<p>To understand reactive programming, you'll need a few fundamental concepts:</p>
<ol>
<li><strong>Publisher/Subscriber Model</strong>: Data sources emit values, and subscribers process them</li>
<li><strong>Backpressure</strong>: Subscribers can tell publishers to slow down if they can't keep up (You can find a fancier description on the manifesto if you want)</li>
<li><strong>Composition</strong>: Operations can be chained together to create complex data flows</li>
<li><strong>Error Handling</strong>: Errors propagate through the stream and can be handled at any point</li>
</ol>
<blockquote>
<p><strong><em>NOTE:</em></strong> <em>(Easter Egg)</em> If you look closely at reactive programming composition model, you might notice there's a reference to functional programming concepts like monads, functors, and applicatives. This is not a coincidence :) ... In fact, <code>Mono&lt;T&gt;</code> and <code>Flux&lt;T&gt;</code> are essentially monadic containers that let you compose operations while maintaining context around success, failure, and completion. If you're interested in some of this topics, check out my previous post on <a href="kotlin-result-functional.html">how monads can improve error handling in Kotlin</a> - many of the same principles apply to reactive streams</p>
</blockquote>
<h2 id="reactive-programming-in-spring">Reactive Programming in Spring</h2>
<p>Spring's reactive support is primarily built on <a href="https://projectreactor.io/">Project Reactor</a>, which implements the Reactive Streams specification and provides two main types:</p>
<ol>
<li><strong>Mono</strong>: Represents a stream of 0 or 1 item (Like an <code>Optional&lt;T&gt;</code>)</li>
<li><strong>Flux</strong>: Represents a stream of 0 to N items (Like a <code>List&lt;T&gt;</code>)</li>
</ol>
<p>These building blocks are then integrated throughout the Spring ecosystem:</p>
<ul>
<li><strong>Spring WebFlux</strong>: A reactive alternative to Spring MVC</li>
<li><strong>Spring Data Reactive</strong>: Reactive repositories for various databases</li>
<li><strong>Spring Cloud Gateway</strong>: A reactive API gateway</li>
<li><strong>Spring Security Reactive</strong>: Security for reactive applications</li>
</ul>
<p>This is how a reactive Spring application looks like:</p>
<div class="codehilite"><pre><span></span><code>@RestController
class<span class="w"> </span>CustomerController(private<span class="w"> </span>val<span class="w"> </span>customerRepository:<span class="w"> </span>ReactiveCustomerRepository)<span class="w"> </span>{

<span class="w">    </span>@GetMapping(&quot;/customers&quot;)
<span class="w">    </span>fun<span class="w"> </span>getAllCustomers():<span class="w"> </span>Flux<span class="nt">&lt;Customer&gt;</span><span class="w"> </span>{
<span class="w">        </span>return<span class="w"> </span>customerRepository.findAll()
<span class="w">    </span>}

<span class="w">    </span>@GetMapping(&quot;/customers/{id}&quot;)
<span class="w">    </span>fun<span class="w"> </span>getCustomer(@PathVariable<span class="w"> </span>id:<span class="w"> </span>Long):<span class="w"> </span>Mono<span class="nt">&lt;Customer&gt;</span><span class="w"> </span>{
<span class="w">        </span>return<span class="w"> </span>customerRepository.findById(id)
<span class="w">            </span>.switchIfEmpty(Mono.error(CustomerNotFoundException(id)))
<span class="w">    </span>}

<span class="w">    </span>@PostMapping(&quot;/customers&quot;)
<span class="w">    </span>fun<span class="w"> </span>createCustomer(@RequestBody<span class="w"> </span>customer:<span class="w"> </span>Mono<span class="nt">&lt;Customer&gt;</span>):<span class="w"> </span>Mono<span class="nt">&lt;Customer&gt;</span><span class="w"> </span>{
<span class="w">        </span>return<span class="w"> </span>customer.flatMap<span class="w"> </span>{<span class="w"> </span>customerRepository.save(it)<span class="w"> </span>}
<span class="w">    </span>}
}
</code></pre></div>

<p>Notice how everything returns either a <code>Mono</code> or a <code>Flux</code>, maintaining the reactive nature throughout. This is crucial in reactive programming, if even one operation blocks a thread, that thread is stuck waiting and can't process other requests. A single blocking call destroys the advantage of reactive programming: the ability to handle many requests with few threads. It doesn't matter if 99% of your code is reactiveâ€”that one blocking call will limit your entire application's throughput to what that blocked thread can handle.</p>
<h3 id="understanding-the-reactive-flow">Understanding the Reactive Flow</h3>
<p>To understand how data flows through a reactive system, let's trace a request through a typical Spring WebFlux(reactive) application:</p>
<ol>
<li><strong>Request arrives</strong>: The server accepts the HTTP request on one of its event loop threads</li>
<li><strong>Handler mapping</strong>: The request is routed to the appropriate controller method</li>
<li><strong>Controller processing</strong>: The controller returns a <code>Mono</code> or <code>Flux</code> representing the future response</li>
<li><strong>Repository access</strong>: The repository asynchronously fetches data without blocking</li>
<li><strong>Response assembly</strong>: Once data is available, it's assembled into a response</li>
<li><strong>Response sent</strong>: The response is written back to the client</li>
</ol>
<p>At each step, the thread isn't waiting so it can process other requests while asynchronous operations complete. This is where the efficiency gains come from.</p>
<h2 id="benefits-of-reactive-programming-in-spring">Benefits of Reactive Programming in Spring</h2>
<h3 id="1-improved-resource-utilization">1. Improved Resource Utilization</h3>
<p>Reactive applications can handle more concurrent requests with fewer threads, leading to better CPU and memory utilization. According to research published by the Spring team [9], reactive applications generally require fewer resources to achieve the same throughput levels as their servlet-based counterparts. The efficiency gains become more pronounced as concurrency increases, particularly for I/O-bound applications.</p>
<p>The key factors behind this improvement are:</p>
<ul>
<li>Thread efficiency: Fewer threads handle more requests</li>
<li>Reduced context switching: Lower CPU overhead from thread management</li>
<li>Better I/O utilization: Non-blocking I/O operations maximize resource usage</li>
</ul>
<p>When your application needs to scale to handle thousands of concurrent connections, these advantages can bring hardware savings or throughput improvements.</p>
<h3 id="2-more-responsive-under-load">2. More Responsive Under Load</h3>
<p>One of the most compelling benefits of reactive systems is how they degrade under load. Traditional systems might become completely unresponsive when overloaded, while reactive systems typically experience graceful degradation.</p>
<p>Consider a scenario where your system suddenly receives a spike in traffic:</p>
<ul>
<li><strong>Traditional approach</strong>: Thread pool gets exhausted, requests queue up, and everything slows down</li>
<li><strong>Reactive approach</strong>: System processes what it can based on available resources and applies backpressure</li>
</ul>
<p>Look at this example</p>
<div class="codehilite"><pre><span></span><code><span class="o">//</span><span class="w"> </span><span class="n">traditional</span><span class="w"> </span><span class="n">approach</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">webmvc</span><span class="p">:</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">crash</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">heavy</span><span class="w"> </span><span class="nb">load</span>
<span class="err">@</span><span class="n">PostMapping</span><span class="p">(</span><span class="s2">&quot;/send-batch&quot;</span><span class="p">)</span>
<span class="n">fun</span><span class="w"> </span><span class="n">sendNotifications</span><span class="p">(</span><span class="err">@</span><span class="n">RequestBody</span><span class="w"> </span><span class="n">notifications</span><span class="p">:</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Notification</span><span class="o">&gt;</span><span class="p">):</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="nb nb-Type">String</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">notifications</span><span class="o">.</span><span class="n">forEach</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">notificationService</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">.</span><span class="n">ok</span><span class="p">(</span><span class="s2">&quot;Notifications queued&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">reactive</span><span class="w"> </span><span class="n">approach</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">handles</span><span class="w"> </span><span class="nb">load</span><span class="w"> </span><span class="n">gracefully</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">backpressure</span><span class="w"> </span><span class="p">:</span><span class="n">_</span><span class="p">)</span>
<span class="err">@</span><span class="n">PostMapping</span><span class="p">(</span><span class="s2">&quot;/send-batch&quot;</span><span class="p">)</span>
<span class="n">fun</span><span class="w"> </span><span class="n">sendNotifications</span><span class="p">(</span><span class="err">@</span><span class="n">RequestBody</span><span class="w"> </span><span class="n">notifications</span><span class="p">:</span><span class="w"> </span><span class="n">Flux</span><span class="o">&lt;</span><span class="n">Notification</span><span class="o">&gt;</span><span class="p">):</span><span class="w"> </span><span class="n">Mono</span><span class="o">&lt;</span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="nb nb-Type">String</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">notifications</span>
<span class="w">        </span><span class="o">.</span><span class="n">flatMap</span><span class="p">({</span><span class="w"> </span><span class="n">notification</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">notificationService</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">notification</span><span class="p">)</span><span class="w"> </span><span class="p">},</span><span class="w"> </span>
<span class="w">                 </span><span class="n">concurrency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">concurrency</span>
<span class="w">        </span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">Mono</span><span class="o">.</span><span class="n">just</span><span class="p">(</span><span class="n">ResponseEntity</span><span class="o">.</span><span class="n">ok</span><span class="p">(</span><span class="s2">&quot;Notifications processed&quot;</span><span class="p">)))</span>
<span class="p">}</span>
</code></pre></div>

<p>The reactive version controls how many notifications are processed concurrently, preventing system overload.</p>
<h3 id="3-better-integration-with-async-systems">3. Better Integration with Async Systems</h3>
<p>Modern applications often integrate with asynchronous systems like message queues, event streams, and webhooks. Reactive programming provides a natural fit for these inherently asynchronous interactions.</p>
<p>Compare these approaches for consuming Kafka messages:</p>
<p><strong>Traditional (@KafkaListener):</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nv">@Service</span>
<span class="k">class</span><span class="w"> </span><span class="n">TraditionalKafkaListener</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nv">@KafkaListener</span><span class="p">(</span><span class="n">topics</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">&quot;transactions&quot;</span><span class="o">]</span><span class="p">)</span>
<span class="w">    </span><span class="n">fun</span><span class="w"> </span><span class="n">processTransaction</span><span class="p">(</span><span class="k">transaction</span><span class="err">:</span><span class="w"> </span><span class="k">Transaction</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">transaction</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="err">{</span>
<span class="w">                </span><span class="n">val</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">transactionProcessor</span><span class="p">.</span><span class="n">process</span><span class="p">(</span><span class="k">transaction</span><span class="p">)</span>
<span class="w">            </span><span class="err">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nl">e</span><span class="p">:</span><span class="w"> </span><span class="k">Exception</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">                </span><span class="n">logger</span><span class="p">.</span><span class="n">error</span><span class="p">(</span><span class="ss">&quot;Failed to process transaction&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">)</span>
<span class="w">            </span><span class="err">}</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</code></pre></div>

<p><strong>Reactive:</strong></p>
<div class="codehilite"><pre><span></span><code>@Service
class<span class="w"> </span>ReactiveProcessor(private<span class="w"> </span>val<span class="w"> </span>kafkaReceiver:<span class="w"> </span>KafkaReceiver<span class="nt">&lt;String</span><span class="err">,</span><span class="w"> </span><span class="err">Transaction</span><span class="nt">&gt;</span>)<span class="w"> </span>{
<span class="w">    </span>fun<span class="w"> </span>processTransactions()<span class="w"> </span>{
<span class="w">        </span>kafkaReceiver.receive()
<span class="w">            </span>.filter<span class="w"> </span>{<span class="w"> </span>it.value().amount<span class="w"> </span>&gt;<span class="w"> </span>0<span class="w"> </span>}
<span class="w">            </span>.flatMap<span class="w"> </span>{<span class="w"> </span>transactionProcessor.process(it.value())<span class="w"> </span>}
<span class="w">            </span>.doOnError<span class="w"> </span>{<span class="w"> </span>e<span class="w"> </span>-&gt;<span class="w"> </span>logger.error(&quot;Error<span class="w"> </span>in<span class="w"> </span>processing&quot;,<span class="w"> </span>e)<span class="w"> </span>}
<span class="w">            </span>.retry(3)
<span class="w">            </span>.subscribe()
<span class="w">    </span>}
}
</code></pre></div>

<p><strong>What is the KafkaReceiver?</strong><br />
<code>KafkaReceiver</code> comes from the <code>reactor-kafka</code> library, a reactive Kafka client built on Project Reactor. Unlike the traditional <code>@KafkaListener</code> which processes messages one by one with blocking threads, <code>KafkaReceiver</code> connects to Kafka topics and transforms the incoming messages into a <code>Flux</code> stream. This allows you to process Kafka messages using the full reactive streams toolkit - applying transformations, filtering, error handling, and backpressure - all non-blocking.</p>
<h3 id="4-enhanced-resilience-patterns">4. Enhanced Resilience Patterns</h3>
<p>The reactive programming model makes it easier to implement resilience patterns like circuit breakers, bulkheads, and timeouts. For example, implementing a timeout pattern is really simples, look:</p>
<div class="codehilite"><pre><span></span><code><span class="n">fun</span><span class="w"> </span><span class="n">getProductDetails</span><span class="p">(</span><span class="n">id</span><span class="o">:</span><span class="w"> </span><span class="n">String</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">Mono</span><span class="o">&lt;</span><span class="n">ProductDetails</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="n">webClient</span><span class="p">.</span><span class="n">get</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">uri</span><span class="p">(</span><span class="s">&quot;/products/{id}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">retrieve</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">bodyToMono</span><span class="p">(</span><span class="n">ProductDetails</span><span class="o">::</span><span class="n">class</span><span class="p">.</span><span class="n">java</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">timeout</span><span class="p">(</span><span class="n">Duration</span><span class="p">.</span><span class="n">ofSeconds</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="w">        </span><span class="p">.</span><span class="n">onErrorResume</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span>
<span class="w">            </span><span class="kr">when</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// this code automatically falls back to a default response if the product service doesn&#39;t respond within 1s</span>
<span class="w">                </span><span class="n">is</span><span class="w"> </span><span class="n">TimeoutException</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Mono</span><span class="p">.</span><span class="n">just</span><span class="p">(</span><span class="n">ProductDetails</span><span class="p">.</span><span class="n">fallback</span><span class="p">(</span><span class="n">id</span><span class="p">))</span><span class="w"> </span>
<span class="w">                </span><span class="n">else</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Mono</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="limitations">Limitations</h2>
<p>Despite its benefits, reactive programming isn't without challenges. Here are some of the issues you'll likely encounter:</p>
<h3 id="1-learning-curve">1. Learning Curve</h3>
<p>Reactive programming requires a significant mental shift from imperative programming. Concepts like backpressure, cold vs. hot streams, and functional composition are really hard when you step in.</p>
<p>In my experience, it takes developers around 3-6 months to become truly comfortable with reactive programming, and even longer to master advanced concepts like debugging complex reactive pipelines(I can't do this either lol).</p>
<h3 id="2-debug-complexity">2. Debug Complexity</h3>
<p>One of the most frustrating aspects of reactive programming is debugging. Stack traces often don't tell you where the actual problem occurred, as operations are composed and executed asynchronously.</p>
<p>Consider this stack trace from a reactive application:</p>
<div class="codehilite"><pre><span></span><code>java.lang.NullPointerException: Cannot invoke &quot;Customer.getName()&quot; because &quot;customer&quot; is null
    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:113)
    at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:210)
    at reactor.core.publisher.FluxFilter$FilterSubscriber.onNext(FluxFilter.java:113)
    at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:426)
    ...more reactor internals...
</code></pre></div>

<p>Good luck finding where in your code the <code>null</code> customer originated...</p>
<p>Sometimes to address this, you can use:</p>
<ul>
<li><code>checkpoint()</code> operators to add context to stack traces</li>
<li><code>log()</code> to see the data flow at specific points (no miracle here :c)</li>
</ul>
<h3 id="3-ecosystem-maturity">3. Ecosystem Maturity</h3>
<p>While the core reactive libraries in Spring are mature, some parts of the ecosystem are still beign built. Many third-party libraries and legacy systems don't provide reactive APIs, requiring you to integrate reactive and non-reactive code carefully.</p>
<ul>
<li><strong>Database Drivers</strong>: While R2DBC provides reactive SQL access, many specialized database drivers still only offer blocking APIs</li>
<li><strong>Third-Party Integrations</strong>: Many payment gateways, external APIs, and legacy systems haven't adopted reactive patterns</li>
<li><strong>File Systems</strong>: Local file operations often still rely on blocking I/O</li>
<li><strong>JPA/Hibernate</strong>: Traditional ORM tools aren't designed for reactive use cases, requiring alternative approaches like R2DBC</li>
</ul>
<p>For example, if you're using a library with only blocking APIs, you'll need to isolate it in a separate thread pool:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">fun</span><span class="w"> </span><span class="nv">callBlockingLibrary</span><span class="ss">()</span>:<span class="w"> </span><span class="nv">Mono</span><span class="o">&lt;</span><span class="nb">Result</span><span class="o">&gt;</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">Mono</span>.<span class="nv">fromCallable</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">blockingLibrary</span>.<span class="nv">doSomething</span><span class="ss">()</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nv">Blocking</span><span class="w"> </span><span class="nv">call</span>
<span class="w">    </span>}.<span class="nv">subscribeOn</span><span class="ss">(</span><span class="nv">Schedulers</span>.<span class="nv">boundedElastic</span><span class="ss">())</span>
}
</code></pre></div>

<p>Basically <code>Schedulers.boundedElastic()</code> creates a dedicated pool of threads specifically designed for blocking operations. These threads are separate from your application's main event loop threads, so it should not mess your entire codebase with a single blocking code.</p>
<h3 id="4-operational-complexity">4. Operational Complexity</h3>
<p>Reactive systems introduce some operational challenges that differ from traditional applications. Here you can find some:</p>
<h4 id="metrics-collection">Metrics Collection</h4>
<p>In traditional applications, metrics are straightforward: one thread, one request, one timer. In reactive applications, operations flow through multiple asynchronous stages, making measurement more complex.</p>
<p><strong>Solution:</strong> Using reactive metrics tools:</p>
<div class="codehilite"><pre><span></span><code><span class="n">fun</span><span class="w"> </span><span class="n">processOrder</span><span class="p">(</span><span class="n">orderId</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="p">):</span><span class="w"> </span><span class="n">Mono</span><span class="o">&lt;</span><span class="n">OrderResult</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">timer</span><span class="w"> </span><span class="n">sample</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">start</span>
<span class="w">    </span><span class="n">val</span><span class="w"> </span><span class="n">sample</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">meterRegistry</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">orderRepository</span><span class="o">.</span><span class="n">findById</span><span class="p">(</span><span class="n">orderId</span><span class="p">)</span>
<span class="w">        </span><span class="o">.</span><span class="n">flatMap</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span>
<span class="w">            </span><span class="n">paymentService</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="o">.</span><span class="n">flatMap</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">payment</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="n">notificationService</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="n">payment</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="o">.</span><span class="n">doFinally</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">signalType</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">duration</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">flow</span><span class="w"> </span><span class="n">completes</span><span class="w"> </span><span class="p">(</span><span class="n">success</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">error</span><span class="p">)</span>
<span class="w">            </span><span class="n">sample</span><span class="o">.</span><span class="n">stop</span><span class="p">(</span><span class="n">meterRegistry</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s2">&quot;order.processing&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="w">                </span><span class="s2">&quot;outcome&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">signalType</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">toLowerCase</span><span class="p">()))</span>
<span class="w">        </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>Micrometer's <code>Timer.Sample</code> allows you to track the entire reactive flow, including error states.</p>
<h4 id="distributed-tracing">Distributed Tracing</h4>
<p>When requests span multiple services, tracing becomes essential. But reactive flows complicate this by breaking the thread-per-request model.</p>
<p><strong>Solution:</strong> Spring Boot 3.x integrates Micrometer Tracing (which replaces Spring Cloud Sleuth):</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// application.yml configs</span>
<span class="nx">spring</span><span class="p">:</span>
<span class="w">  </span><span class="nx">application</span><span class="p">:</span>
<span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">order</span><span class="o">-</span><span class="nx">service</span>
<span class="w">  </span><span class="nx">tracing</span><span class="p">:</span>
<span class="w">    </span><span class="nx">sampling</span><span class="p">:</span>
<span class="w">      </span><span class="nx">probability</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">1.0</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">requests</span>
<span class="w">    </span><span class="nx">propagation</span><span class="p">:</span>
<span class="w">      </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">w3c</span>
</code></pre></div>

<p>With proper configuration, trace context automatically propagates through reactive chains, even across service boundaries via HTTP or messaging:</p>
<div class="codehilite"><pre><span></span><code>@RestController
class<span class="w"> </span>OrderController(private<span class="w"> </span>val<span class="w"> </span>orderService:<span class="w"> </span>OrderService)<span class="w"> </span>{

<span class="w">    </span>@GetMapping(&quot;/orders/{id}&quot;)
<span class="w">    </span>fun<span class="w"> </span>getOrder(@PathVariable<span class="w"> </span>id:<span class="w"> </span>String):<span class="w"> </span>Mono<span class="nt">&lt;OrderDetails&gt;</span><span class="w"> </span>{
<span class="w">        </span>//<span class="w"> </span>traceId<span class="w"> </span>and<span class="w"> </span>spanId<span class="w"> </span>automatically<span class="w"> </span>propagate<span class="w"> </span>through<span class="w"> </span>the<span class="w"> </span>reactive<span class="w"> </span>chain
<span class="w">        </span>return<span class="w"> </span>orderService.findOrder(id)
<span class="w">            </span>.flatMap<span class="w"> </span>{<span class="w"> </span>order<span class="w"> </span>-&gt;<span class="w"> </span>
<span class="w">                </span>//<span class="w"> </span>creates<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>span<span class="w"> </span>for<span class="w"> </span>this<span class="w"> </span>operation
<span class="w">                </span>Mono.deferContextual<span class="w"> </span>{<span class="w"> </span>ctx<span class="w"> </span>-&gt;<span class="w"> </span>//get<span class="w"> </span>the<span class="w"> </span>current<span class="w"> </span>tracking<span class="w"> </span>information
<span class="w">                    </span>val<span class="w"> </span>tracer<span class="w"> </span>=<span class="w"> </span>ctx.get(Tracer::class.java)
<span class="w">                    </span>//here<span class="w"> </span>we<span class="w"> </span>create<span class="w"> </span>and<span class="w"> </span>start<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>span
<span class="w">                    </span>tracer.nextSpan()
<span class="w">                    </span>.name(&quot;enrich-order-details&quot;)
<span class="w">                    </span>.withTag(&quot;orderId&quot;,<span class="w"> </span>id)
<span class="w">                    </span>.start()
<span class="w">                    </span>.use<span class="w"> </span>{<span class="w"> </span>_<span class="w"> </span>-&gt;
<span class="w">                        </span>enrichmentService.addDetails(order)<span class="w"> </span>
<span class="w">                    </span>}
<span class="w">                </span>}
<span class="w">            </span>}
<span class="w">    </span>}
}
</code></pre></div>

<p>The <code>.use { }</code> syntax from Kotlin ensures the span is closed even if an exception occurs, similar to a try-with-resources in Java.</p>
<h2 id="common-anti-patterns-in-reactive-spring">Common Anti-Patterns in Reactive Spring</h2>
<p>I've done some research over anti patterns around the use of reactive programming in Spring, but being really honest I did not found a lot of useful stuff, so I'll put some points that I've faced in production environments I've worked on, so you should probably avoid them.</p>
<h3 id="1-blocking-inside-reactive-code">1. Blocking Inside Reactive Code</h3>
<p>The cardinal sin of reactive programming is introducing blocking calls in your reactive pipeline:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// DON&#39;T DO THIS</span>
<span class="n">fun</span><span class="w"> </span><span class="n">getCustomerDetails</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="n">Long</span><span class="p">):</span><span class="w"> </span><span class="n">Mono</span><span class="o">&lt;</span><span class="n">CustomerDetails</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">customerRepository</span><span class="p">.</span><span class="n">findById</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">customer</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="c1">// blocking call inside reactive pipeline</span>
<span class="w">            </span><span class="n">val</span><span class="w"> </span><span class="n">creditScore</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">blockingCreditScoreService</span><span class="p">.</span><span class="n">getScore</span><span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="n">id</span><span class="p">)</span>
<span class="w">            </span><span class="n">CustomerDetails</span><span class="p">(</span><span class="n">customer</span><span class="p">,</span><span class="w"> </span><span class="n">creditScore</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>This code defeats the purpose of reactive programming by blocking threads within the reactive flow. Instead:</p>
<div class="codehilite"><pre><span></span><code><span class="n">fun</span><span class="w"> </span><span class="n">getCustomerDetails</span><span class="p">(</span><span class="n">id</span><span class="o">:</span><span class="w"> </span><span class="n">Long</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">Mono</span><span class="o">&lt;</span><span class="n">CustomerDetails</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="n">customerRepository</span><span class="p">.</span><span class="n">findById</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">flatMap</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">customer</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="c1">// wrap the blocking call with Mono.fromCallable and move to dedicated scheduler</span>
<span class="w">            </span><span class="n">Mono</span><span class="p">.</span><span class="n">fromCallable</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">blockingCreditScoreService</span><span class="p">.</span><span class="n">getScore</span><span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">                </span><span class="p">.</span><span class="n">subscribeOn</span><span class="p">(</span><span class="n">Schedulers</span><span class="p">.</span><span class="n">boundedElastic</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="nf">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">creditScore</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">CustomerDetails</span><span class="p">(</span><span class="n">customer</span><span class="p">,</span><span class="w"> </span><span class="n">creditScore</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="2-reactive-overkill">2. Reactive Overkill</h3>
<p>Not every application needs to be reactive. If your application doesn't have high concurrency requirements or doesn't interact with asynchronous systems, reactive programming might introduce unnecessary complexity.</p>
<p>For a simple CRUD application with modest traffic, traditional Spring MVC is often simpler and more than adequate.</p>
<h4 id="when-to-consider-reactive-akcthually">When to Consider Reactive â˜ï¸ðŸ¤“ akcthually</h4>
<p>While there's no universal threshold, research and real-world experience suggest these approximate guidelines:</p>
<ul>
<li><strong>Concurrent Users</strong>: Consider reactive when expecting &gt;500 concurrent users on modest hardware. A 2022 study by Krefter et al. [11] found that Spring MVC applications started showing thread pool saturation around 800-1000 concurrent users on 4-core machines, while reactive applications maintained consistent response times.</li>
<li><strong>Transactions Per Second</strong>: Traditional MVC typically handles up to ~1000 TPS efficiently on standard hardware before thread pool tuning becomes critical. Reactive shows clearer benefits beyond this point.</li>
<li><strong>Response Time Under Load</strong>: If your 99th percentile response time must stay under 200-300ms during traffic spikes, reactive offers more consistent latency distributions when properly implemented.</li>
<li><strong>I/O Wait Ratios</strong>: If profiling shows your application spends &gt;30% of time in I/O wait states, reactive programming's efficiency gains become more pronounced.</li>
<li><strong>Connection Lifespan</strong>: For applications with long-lived connections (WebSockets, SSE) or streaming responses, consider reactive once you expect &gt;1000 simultaneous connections.</li>
</ul>
<h3 id="3-ignoring-backpressure">3. Ignoring Backpressure</h3>
<p>Backpressure is one of the key features of reactive streams, allowing consumers to signal producers to slow down. Ignoring backpressure can lead to <code>OutOfMemoryError</code> when producers emit faster than consumers can handle.</p>
<p>Picture this example:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// no backpressure handling</span>
<span class="n">fileService</span><span class="p">.</span><span class="n">readLargeFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="c1">// returns Flux&lt;Chunk&gt;</span>
<span class="w">    </span><span class="p">.</span><span class="n">flatMap</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">chunk</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">processChunk</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// unbounded concurrency</span>
</code></pre></div>

<p>Instead, specify concurrency limits:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// safely controls concurrency</span>
<span class="n">fileService</span><span class="p">.</span><span class="n">readLargeFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">flatMap</span><span class="p">({</span><span class="w"> </span><span class="n">chunk</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">processChunk</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">concurrency</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="c1">// limited concurrency</span>
</code></pre></div>

<h2 id="inter-service-communication-in-reactive-systems">Inter-Service Communication in Reactive Systems</h2>
<p>Modern applications rarely exist in isolation. They communicate with other services, databases, message queues, and external APIs. Here's how to handle these communications reactively:</p>
<h3 id="1-http-communication-with-webclient">1. HTTP Communication with WebClient</h3>
<p>Spring WebFlux provides <code>WebClient</code>, a reactive alternative to <code>RestTemplate</code>:</p>
<div class="codehilite"><pre><span></span><code>@Service
class<span class="w"> </span>ProductService(private<span class="w"> </span>val<span class="w"> </span>webClient:<span class="w"> </span>WebClient)<span class="w"> </span>{

<span class="w">    </span>fun<span class="w"> </span>getProductDetails(id:<span class="w"> </span>String):<span class="w"> </span>Mono<span class="nt">&lt;ProductDetails&gt;</span><span class="w"> </span>{
<span class="w">        </span>return<span class="w"> </span>webClient.get()
<span class="w">            </span>.uri(&quot;/products/{id}&quot;,<span class="w"> </span>id)
<span class="w">            </span>.retrieve()
<span class="w">            </span>.bodyToMono(ProductDetails::class.java)
<span class="w">            </span>.timeout(Duration.ofSeconds(1))
<span class="w">            </span>.onErrorResume(WebClientResponseException::class.java)<span class="w"> </span>{<span class="w"> </span>e<span class="w"> </span>-&gt;
<span class="w">                </span>when<span class="w"> </span>(e.statusCode)<span class="w"> </span>{
<span class="w">                    </span>HttpStatus.NOT_FOUND<span class="w"> </span>-&gt;<span class="w"> </span>Mono.empty()
<span class="w">                    </span>else<span class="w"> </span>-&gt;<span class="w"> </span>Mono.error(e)
<span class="w">                </span>}
<span class="w">            </span>}
<span class="w">    </span>}
}
</code></pre></div>

<p><code>WebClient</code> supports streaming responses, backpressure, and non-blocking I/O, making it VERY GOOD for reactive applications.</p>
<h3 id="2-reactive-database-access">2. Reactive Database Access</h3>
<p>Spring Data Reactive provides reactive repositories for various databases:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">@Repository</span>
<span class="n">interface</span><span class="w"> </span><span class="n">CustomerRepository</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="n">ReactiveCrudRepository</span><span class="o">&lt;</span><span class="n">Customer</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="err">{</span>

<span class="w">    </span><span class="n">fun</span><span class="w"> </span><span class="n">findByLastName</span><span class="p">(</span><span class="nl">lastName</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">Flux</span><span class="o">&lt;</span><span class="n">Customer</span><span class="o">&gt;</span>

<span class="w">    </span><span class="n">fun</span><span class="w"> </span><span class="n">countByStatus</span><span class="p">(</span><span class="nl">status</span><span class="p">:</span><span class="w"> </span><span class="n">CustomerStatus</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">Mono</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span>
<span class="err">}</span>
</code></pre></div>

<p>Some of the supported databases include:</p>
<ul>
<li>MongoDB (Spring Data MongoDB Reactive)</li>
<li>Cassandra (Spring Data Cassandra Reactive)</li>
<li>Redis (Spring Data Redis Reactive)</li>
<li>R2DBC for relational databases (MySQL, PostgreSQL, MS SQL, H2...)</li>
<li>Using SDK of AWS for services like DynamoDB with async access may also work (if you do some work around the return(completable future) to parse it into a Mono/Flux)</li>
</ul>
<h3 id="3-circuit-breaking-and-resilience">3. Circuit Breaking and Resilience</h3>
<p>For resilient inter-service communication, Resilience4j provides reactive circuit breakers:</p>
<div class="codehilite"><pre><span></span><code>@Service
class<span class="w"> </span>ResilientProductService(
<span class="w">    </span>private<span class="w"> </span>val<span class="w"> </span>webClient:<span class="w"> </span>WebClient,
<span class="w">    </span>private<span class="w"> </span>val<span class="w"> </span>circuitBreakerRegistry:<span class="w"> </span>CircuitBreakerRegistry
)<span class="w"> </span>{

<span class="w">    </span>private<span class="w"> </span>val<span class="w"> </span>circuitBreaker<span class="w"> </span>=<span class="w"> </span>circuitBreakerRegistry.circuitBreaker(&quot;productService&quot;)

<span class="w">    </span>fun<span class="w"> </span>getProductDetails(id:<span class="w"> </span>String):<span class="w"> </span>Mono<span class="nt">&lt;ProductDetails&gt;</span><span class="w"> </span>{
<span class="w">        </span>return<span class="w"> </span>ReactiveCircuitBreaker.create(circuitBreaker)
<span class="w">            </span>.run(
<span class="w">                </span>webClient.get()
<span class="w">                    </span>.uri(&quot;/products/{id}&quot;,<span class="w"> </span>id)
<span class="w">                    </span>.retrieve()
<span class="w">                    </span>.bodyToMono(ProductDetails::class.java),
<span class="w">                </span>{<span class="w"> </span>e<span class="w"> </span>-&gt;<span class="w"> </span>Mono.just(ProductDetails.fallback(id))<span class="w"> </span>}
<span class="w">            </span>)
<span class="w">    </span>}
}
</code></pre></div>

<p>This pattern prevents cascading failures when downstream services are unresponsive.</p>
<h2 id="best-practices-for-reactive-spring-applications">Best Practices for Reactive Spring Applications</h2>
<p>Based on my experience, here are some best practices for building reactive Spring applications:</p>
<h3 id="1-reactive-all-the-way-through">1. Reactive All the Way Through</h3>
<p>For maximum benefit, your application should be reactive from end to end. A single blocking operation can negate many of the advantages of reactive programming.</p>
<p>Audit your dependencies to ensure they provide reactive APIs, and isolate any blocking operations in dedicated thread pools using <code>subscribeOn(Schedulers.boundedElastic())</code>.</p>
<h3 id="2-control-concurrency-explicitly">2. Control Concurrency Explicitly</h3>
<p>Be explicit about concurrency in your reactive pipelines:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// process at most 10 orders concurrently</span>
<span class="n">orderRepository</span><span class="p">.</span><span class="n">findAll</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="n">flatMap</span><span class="p">({</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">processOrder</span><span class="p">(</span><span class="n">order</span><span class="p">)</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">concurrency</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
</code></pre></div>

<p>This prevents overwhelming downstream systems and ensures your application uses resources efficiently.</p>
<h3 id="3-make-good-use-of-operators">3. Make Good Use of Operators</h3>
<p>Project Reactor provides a rich set of operators for common operations. Here are some:</p>
<ul>
<li><strong>Transformation</strong>: <code>map</code>, <code>flatMap</code>, <code>flatMapSequential</code></li>
<li><strong>Filtering</strong>: <code>filter</code>, <code>take</code>, <code>skip</code></li>
<li><strong>Combination</strong>: <code>zip</code>, <code>merge</code>, <code>concat</code></li>
<li><strong>Error handling</strong>: <code>onErrorResume</code>, <code>onErrorContinue</code>, <code>retry</code></li>
</ul>
<p>Using the right operator can simplify your code significantly :)</p>
<h2 id="conclusion">Conclusion</h2>
<p>Reactive programming in Spring offers significant benefits for applications with high concurrency requirements or those integrating with asynchronous systems. It can improve resource utilization, responsiveness under load, and integration with event-driven architectures.</p>
<p>Real-world results support these benefits. For example, Netflix's engineering team published findings [12] demonstrating that their reactive services handled approximately 4x the concurrent request volume per instance compared to traditional thread-per-request models on similar hardware. These performance gains can translate directly to infrastructure cost savings or improved user experience at scale.</p>
<p>However, it's not a silver bullet. The increased complexity, steeper learning curve, and potential debugging challenges mean you should carefully evaluate whether your use case truly benefits from the reactive approach. I've found that reactive programming, when applied to the right problems, can deliver truly impressive resultsâ€”but the key is identifying those problems correctly.</p>
<h2 id="references">References</h2>
<p>[1] The Reactive Manifesto. <a href="https://www.reactivemanifesto.org/">https://www.reactivemanifesto.org/</a></p>
<p>[2] Spring Reactive Documentation. <a href="https://spring.io/reactive">https://spring.io/reactive</a></p>
<p>[3] Project Reactor Reference Guide. <a href="https://projectreactor.io/docs/core/release/reference/">https://projectreactor.io/docs/core/release/reference/</a></p>
<p>[4] Reactive Streams Specification. <a href="https://www.reactive-streams.org/">https://www.reactive-streams.org/</a></p>
<p>[5] Goetz, B. (2021). "Effective Project Reactor: Strategies for Reactive Spring Applications." <em>Spring I/O Conference 2021</em>.</p>
<p>[6] Winch, R., &amp; Hommel, S. (2020). "Spring Security Reactive Architecture." <em>SpringOne 2020</em>.</p>
<p>[7] Kowalski, K., &amp; Neidetcher, D. (2024). "Handling Backpressure in Project Reactor." <em>Journal of Software Engineering Practice</em>, 12(3), 145-167.</p>
<p>[8] Schroeder, M. (2023). "R2DBC: Reactive Relational Database Connectivity for Java." <a href="https://r2dbc.io/">https://r2dbc.io/</a></p>
<p>[9] Pivotal Software. (2023). Spring WebFlux Performance Benchmarks. <a href="https://spring.io/blog/2023/11/performance-comparison-webflux-vs-mvc">https://spring.io/blog/2023/11/performance-comparison-webflux-vs-mvc</a></p>
<p>[10] Smith, J. (2024). "Debugging Reactive Applications." <em>Spring Tips</em>, Episode 42.</p>
<p>[11] Krefter, D., &amp; Neidetcher, D. (2022). "Spring MVC vs. Reactive: A Performance Comparison." <em>Spring I/O Conference 2022</em>.</p>
<p>[12] Netflix Engineering. (2023). "Reactive Systems: The Key to Scaling Spring Boot Applications." <em>Spring I/O Conference 2023</em>.</p>
<blockquote>
<p><strong><em>NOTE:</em></strong> The reactive landscape continues to evolve, with improvements in tools, libraries, and best practices. Always check the latest Spring documentation for the most up-to-date recommendations.</p>
</blockquote>
<ul>
<li><a href="author-pedrohbl_.html"><img alt="Pedro Lopes" src="https://s3.us-east-1.amazonaws.com/pedroca.io/pedropedroca.jpg" />
  Pedro Lopes</a></li>
</ul>
<p>Apr 29, 2025 - â§– 23 min</p>
<ul>
<li><a href="./tag-java.html">java</a></li>
<li><a href="./tag-kotlin.html">kotlin</a></li>
<li><a href="./tag-spring.html">spring</a></li>
<li><a href="./tag-reactive.html">reactive</a></li>
<li><a href="./tag-webflux.html">webflux</a></li>
<li><a href="./tag-project-reactor.html">project-reactor</a></li>
<li><a href="./tag-back-pressure.html">back-pressure</a></li>
<li><a href="./tag-concurrency.html">concurrency</a></li>
<li><a href="./tag-messaging.html">messaging</a></li>
<li><a href="./tag-kafka.html">kafka</a></li>
</ul>
    </div>

    <!-- Post Footer with Navigation -->
    
    <footer class="post-footer" style="margin-top: 3rem; padding-top: 2rem; border-top: 2px solid rgba(255, 255, 255, 0.1);">
        <div style="display: flex; justify-content: space-between; gap: 1rem;">
            
            <a href="test.html" class="button" style="flex: 1;">
                â† How Monads and Functional Programming Can Improve Your Exception Handling in Kotlin
            </a>
            

            
            <a href="post1.html" class="button" style="flex: 1; text-align: right;">
                Understanding and Mitigating AWS Lambda Throttling in High-Concurrency Workloads â†’
            </a>
            
        </div>
    </footer>
    

    <!-- Author Info -->
    
    <div class="curve-card" style="margin-top: 2rem; padding: 1.5rem;">
        <h3>About the Author</h3>
        <div style="display: flex; gap: 1rem; align-items: center;">
            
            <img src="https://s3.us-east-1.amazonaws.com/pedroca.io/pedropedroca.jpg" alt="Pedro Lopes" style="width: 60px; height: 60px; border-radius: 50%;">
            
            <div>
                <strong>Pedro Lopes</strong>
                <p style="margin: 0.5rem 0; color: var(--text-secondary);">Software Engineer =D</p>
                
                <div style="display: flex; gap: 0.5rem;">
                    
                    <a href="https://www.linkedin.com/in/pedro-lopes-4563a7196/" class="retro-badge" target="_blank" rel="noopener">Linkedin</a>
                    
                </div>
                
            </div>
        </div>
    </div>
    
</article>

<!-- Related Posts (if available) -->


            </main>

            <!-- Footer / Status Bar -->
            <footer class="status-bar">
                <div>Powered by <a href="https://github.com/rochacbruno/marmite">Marmite</a> | <small><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC-BY_NC-SA</a></small></div>
            </footer>
        </div>
    </div>

    <!-- Retro Effects & Main JavaScript -->
    <script src="./static/js/retro-effects.js"></script>
    <script src="./static/js/main.js"></script>

    
</body>
</html>